"use strict";$(function(){var t=localStorage.getItem("username");if(t){var e=JSON.parse(t).find(function(t){return t.username});$(".log-in").text("欢迎"+e.username+"登录"),$(".sign-up").text("退出登录"),$(".sign-up").attr("href","javascript:;")}else $(".log-in").text("你好，请登录"),$(".sign-up").text("免费注册");$(".sign-up").on("click",function(){$(".log-in").text("你好，请登录"),$(".sign-up").text("免费注册")});var i=+new Date;function a(t,r){$.ajax({url:t,type:"get",data:{body:'{"query":"query getCommodities($ids: String){commodities(ids: $ids){groupId, groupName, productList{canSell skuId name image title productImage commentCount goodRate currentPrice jdPrice pPrice pcpPrice plusPrice productExtInfo tag copyWriting copyWritingDown backUpWords}}}","operationName":"getCommodities","variables":{"ids":"['+r+']"},"config":{"cache":false,"trim":true,"map":{"keyBy":"groupId","valueField":"productList"}}}',callback:"o2caa17f648c872f5e507918066b59eb4f",_:i},async:!1,dataType:"jsonp",success:function(t){for(var e="",i=0;i<t.data[r].length;i++){var a=t.data[r][i],n=a.image,o=a.name,s=a.pPrice;e+='\n                    <li class="gl-item">\n                        <div class="gl-item-i" data-gods-id='+a.skuId+'>\n                            <div class="p-img">\n                                <a href="javascript:;">\n                                    <img src="'+n+'" alt="">\n                                </a>\n                            </div>\n                            <div class="p-price">\n                                <strong>\n                                    <i>￥</i>'+s+'\n                                </strong>\n                                <span id=\'cart\'>加入购物车</span>\n                            </div>\n                            <div class="p-name">\n                                <a href="javascript:;">\n                                    '+o+"\n                                </a>\n                            </div>\n                        </div>\n                    </li>\n                    "}$(".gl-wrap").append(e)},error:function(t){console.log(t)}})}a("/goodslist",13533988),a("/goodslist",13525086),a("/goodslist",13534536),a("/goodslist",13534061),a("/goodslist",13534033),a("/goodslist",14092307),a("/goodslist",13536659),a("/goodslist",10706414),a("/goodslist",13525137),a("/goodslist",13525135),a("/goodslist",13534557),$(".gl-item-i a").click(function(){var t=$(this).parent().parent().attr("data-gods-id");location.href="./detail.html?skuid="+t});$(".gl-item-i span").click(function(){var t=$(".log-in ").text();if(console.log("你好，请登录"==t),"你好，请登录"==!t)alert("请您先登录"),console.log(11),location.href="./login.html";else{var e=$(this).parent().parent().attr("data-gods-id");console.log(e);var i=localStorage.getItem("data"),a=localStorage.getItem("username"),n=(r=JSON.parse(a).find(function(t){return t.username})).username,o={skuId:e,username:n,num:1},s=[];if(i){var r;if(r=(s=JSON.parse(i)).find(function(t){return t.skuId===e}))return r.num+=1,localStorage.setItem("data",JSON.stringify(s)),!1;o.num=1}else o.num=1;s.push(o),localStorage.setItem("data",JSON.stringify(s))}})});