"use strict"; $(function () { $(".login-tab a").on("click", function () { for (var e = 0; e < $(".login-tab a").length; e++)$(".login-tab a").removeClass("active"); $(this).addClass("active"), "扫码登录" !== $(this).text() ? ($(".qrcode-err").css("display", "none"), $(".qrcode-img").css("display", "none"), $(".qrcode-brief").css("display", "none"), $(".describe").css("display", "none"), $(".login_con").css("display", "block")) : ($(".qrcode-err").css("display", "block"), $(".qrcode-img").css("display", "block"), $(".qrcode-brief").css("display", "block"), $(".describe").css("display", "block"), $(".login_con").css("display", "none")) }), document.querySelector(".register").onclick = function () { var c = $("#user_name").val(), e = $("#user_password").val(); if (!/^[a-z0-9]\w{4,11}$/.test(c)) return alert("用户名不规范"), !1; if (!/^\w{6,12}$/.test(e)) return alert("密码不规范"), !1; var i = new XMLHttpRequest; i.open("post", "http://localhost:8888/users/login"), i.setRequestHeader("content-type", "application/x-www-form-urlencoded"), i.send("username=" + c + "&password=" + e), i.onreadystatechange = function () { if (4 === i.readyState && 200 <= i.status && i.status < 300) { var e = i.responseText, s = e = JSON.parse(e), t = s.code, a = s.message, o = (s.token, s.user); alert(a); var r = { id: 1, username: c}, n = []; if (n.push(r), localStorage.setItem("username", JSON.stringify(n)), 1 === t) { o.id; location.href = "./index.html" } } } } });