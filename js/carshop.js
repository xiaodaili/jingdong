"use strict";$(function(){var t=+new Date;if("]"==(e=localStorage.getItem("data"))[1]){var e="\n        <div class='jumbortsor' width='100%' height='100%' background=\"black\">\n            <h1>购物车空空的，赶快去添加吧!</h1>\n            <p>你还在等什么呢，赶快登录去添加商品吧！</p>\n            <p> <a class='btn btn-primacy'></a> </p>\n        </div>\n        ";return $("body").append(e),!1}for(var i=JSON.parse(e),c=[],a=0;a<i.length;a++)c.push(i[a].skuId),n(c[a],i[a].num);function n(r,i){$.ajax({url:"/detailgoods",data:{methods:"accessories",sku:r,cat:"9987,653,655",lid:1,pin:"jd_756d3cc64ebb0",ck:"pin,CipLocation,Catw,Caview",_:t},async:!1,success:function(t){var e,a=t.accessories.data,n=a.wName,c=a.imageUrl,s=a.wMaprice;e='\n                <div class="cart-list-wrap">\n                    <div class="cart-list select-bg ">\n                        <div class="clear_float con">\n                            <input type="checkbox" class="checkbox select" data=\''+r+'\'>\n                            <div class="cart_goods">\n                                <div class="cart_img">\n                                    <img src="https://img12.360buyimg.com/n0/s80x80_'+c+'" alt="">\n                                </div>\n                                <div class="pic_info">\n                                    <p class="cart_p">'+n+'</p>\n                                </div>\n                            </div>\n                            <div class="goods-price">\n                                ￥<span>'+s+'</span>\n                            </div>\n                            <div class="btn_con">\n                                <span class="btn_span1">-</span>\n                                <span class="btn_span2" data-type=\''+r+"'>"+i+'</span>\n                                <span class="btn_span3">+</span>\n                            </div>\n                            <div class="goods-total-price">￥<span>'+s*i+'</span></div>\n                            <div class="good-operation">\n                                <p data=\''+r+"'>删除</p>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                ",$(".cart-body").append(e)},error:function(t){console.log(t)}})}var o=0;$(".btn_span3").click(function(){o=0;var t=$(this).prev().text()-0,e=$(this).parent().prev().children().text()-0;100<++t&&(t=99);var a=localStorage.getItem("data");i=JSON.parse(a);for(var n=0;n<i.length;n++){var c=i[n].skuId;console.log($(this).prev().attr("data-type")),c==$(this).prev().attr("data-type")&&(console.log($(this).prev().text()-0),i[n].num=t,localStorage.setItem("data",JSON.stringify(i)))}$(this).prev().text(t);var s=t*e;if($(this).parent().next().children().text(s),$(this).parent().prev().prev().prev()[0].checked){for(var r=0;r<$(".select").length;r++)$(".select")[r].checked&&(o+=$(".goods-total-price span")[r].innerText-0);$(".a3 span").text(o)}}),$(".btn_span1").click(function(){o=0;var t=$(this).next().text()-0,e=$(this).parent().prev().children().text()-0;--t<1&&(t=1);var a=localStorage.getItem("data");i=JSON.parse(a);for(var n=0;n<i.length;n++){var c=i[n].skuId;console.log($(this).next().attr("data-type")),c==$(this).next().attr("data-type")&&(console.log($(this).prev().text()-0),i[n].num=t,localStorage.setItem("data",JSON.stringify(i)))}$(this).next().text(t);var s=t*e;if($(this).parent().next().children().text(s),$(this).parent().prev().prev().prev()[0].checked){for(var r=0;r<$(".select").length;r++)$(".select")[r].checked&&(o+=$(".goods-total-price span")[r].innerText-0);$(".a3 span").text(o)}}),$(".select").click(function(){for(var t=o=0;t<$(".select").length;t++)$(".select")[t].checked&&(o+=$(".goods-total-price span")[t].innerText-0);$(".a3 span").text(o)}),$(".last_a1").click(function(){for(var t=0;t<$(".select").length;t++)$(".select")[t].checked&&function(){var n=document.querySelectorAll(".select")[t].getAttribute("data");c.forEach(function(t,e){if(t==n){var a=localStorage.getItem("data");(i=JSON.parse(a)).splice(e,1),console.log(i),localStorage.setItem("data",JSON.stringify(i))}})}();location.href="./thanks.html"}),$(".good-operation p").click(function(){var e=this;$(this).parent().parent().parent().remove();for(var t=function(t){var n=$(e).attr("data");console.log(c,n),c.forEach(function(t,e){if(t==n){var a=localStorage.getItem("data");(i=JSON.parse(a)).splice(e,1),localStorage.setItem("data",JSON.stringify(i))}})},a=0;a<$(".good-operation p").length;a++)t()});var s=Array.from(document.querySelectorAll("input")),r=document.querySelector("input:nth-child(1)"),l=s.slice(1),d=0;function p(t){l.forEach(function(t){1==r.checked?t.checked="checked":t.checked=""})}function v(t){l.indexOf(t.target);1==t.target.checked?++d%l.length==0&&(r.checked="checked"):(d--,r.checked=!1)}r.addEventListener("click",p),l.forEach(function(t){t.addEventListener("click",v)})});