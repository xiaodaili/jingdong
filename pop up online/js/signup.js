"use strict";var username=document.querySelector(".username"),nickname=document.querySelector(".nickname"),password=document.querySelector(".password"),rpassword=document.querySelector(".rpassword"),divs=document.querySelectorAll(".space");function sendAjax(){return/^[a-z0-9]\w{4,11}$/.test(username)?/^\w{6,12}$/.test(password)?password!==rpassword?(alert("两次密码不一致"),!1):void promiseAjax({url:"http://localhost:8888/users/register",method:"post",headers:{"content-type":"application/x-www-form-urlencoded"},data:{username:username,password:password,rpassword:rpassword,nickname:nickname}}).then(function(e){console.log(e),location.href="login.html?id"+userid}):(alert("密码不规范"),!1):(alert("用户名不规范"),!1)}function letHint(){console.log(divs[0].children.length),divs[0].children.length&&(divs[0].innerHTML="");var e=document.createElement("span");e.innerText="用户名由数字或字母开头包含数字字母下划线的5-12位字符组成",divs[0].appendChild(e)}function letDOit(){if(divs[0].children.length){divs[0].innerHTML="";var e=document.createElement("span");if(divs[0].appendChild(e),!/^[a-z0-9]\w{4,11}$/.test(username.value))return e.innerText="不符合规则",e.style.color="#f00",!(flag=!0);e.innerText="成功",e.style.color="#0f0",flag=!1}}btn=document.querySelector(".btn"),btn.addEventListener("click",sendAjax),username.addEventListener("focus",letHint),username.addEventListener("input",letDOit);